
<!-- This layout is setup for NHS.UK pages -->

<!-- Extends the layout from /docs/views/layouts/layout.html -->
{% extends "layout.html" %}

<!-- Set the page title inside this block -->
{% block pageTitle %}
Org name - Overview
{% endblock %}

<!-- Header goes inside this block -->
{% block header %}
{{ header({
"showNav": "true",
"showSearch": "false",
"primaryLinks": [
{
"url"  : "/editor",
"label" : "My profiles"
},
{
'url' : '/editor/picker',
'label' : 'Add profile'
},
{
'url'  : '/editor',
'label' : 'Manage users'
},
{
'url'  : '/editor',
'label' : 'Review comments'
},
{
'url'  : '/editor',
'label' : 'Logout'
}
]
})
}}
{% endblock %}

<!-- Breadcrumb goes inside this block -->
{% block beforeContent %}
<nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
  <div class="nhsuk-width-container">
    <ol class="nhsuk-breadcrumb__list">
      <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="/editor">Home</a></li>
    </ol>
    <p class="nhsuk-breadcrumb__back"><a class="nhsuk-breadcrumb__backlink" href="/editor">Back to My profiles</a></p>
  </div>
</nav>
{% endblock %}


{% block content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds">
    <form method="post" action="/monday-time">
      <div id="enter-time" class="nhsuk-form-group">
        <fieldset class="nhsuk-fieldset">
          <legend class="nhsuk-fieldset__legend">
            <h1>What time is Hyde Park Pharmacy open?</h1>
          </legend>
          <p>Your hours of opening form part of your contract and cannot be changed without first contacting your Regional Team prior to editing this section. Changes to supplementary
            hours require three monthsâ€™ notice. Changes to Core Hours can only be made following a successful application.</p>
          <p>Regional Teams will be made aware on a regular basis of any changes to provider profiles.</p>
          <span class="nhsuk-hint">Please enter times below in the 24 hour format. For midnight use 00:00 and for midday use 12:00. Times must not overlap. For services that close
            at midnight please use 23:59 to avoid validation errors. Services that start at midnight please use 00:00.</span>
          <div id="openingTimes">
            <div id="timeEntry1" class="nhsuk-u-margin-bottom-3">
              <div class="nhsuk-date-input__item">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-label nhsuk-date-input__label" for="openTime1">Open</label>
                  <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" name="openTime1" type="time" id="openTime1">
                </div>
              </div>
              <div class="nhsuk-date-input__item">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-label nhsuk-date-input__label" for="closeTime1">Closed</label>
                  <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" name="closeTime1" type="time" id="closeTime1">
                </div>
              </div>
            </div>
            <div id="timeEntry2" class="nhsuk-u-margin-bottom-3">
              <div class="nhsuk-date-input__item">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-label nhsuk-date-input__label" for="openTime2">Open</label>
                  <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" name="openTime2" type="time" id="openTime2">
                </div>
              </div>
              <div class="nhsuk-date-input__item">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-label nhsuk-date-input__label" for="closeTime2">Closed</label>
                  <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" type="time" name="closeTime2" id="closeTime2">
                </div>
              </div>
            </div>
            <div id="timeEntry3" class="nhsuk-u-margin-bottom-3">
              <div class="nhsuk-date-input__item">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-label nhsuk-date-input__label" for="openTime3">Open</label>
                  <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" type="time" name="openTime3" id="openTime3">
                </div>
              </div>
              <div class="nhsuk-date-input__item">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-label nhsuk-date-input__label" for="closeTime3">Closed</label>
                  <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" type="time" name="closeTime3" id="closeTime3">
                </div>
              </div>
            </div>
            <p><a id="anotherTime" href="">Add another opening time</a></p>
          </div>
          <div class="nhsuk-checkboxes">
            <div class="nhsuk-checkboxes__item">
              <input type="checkbox" id="24hours" class="nhsuk-checkboxes__input" name="open24Hours" />
              <label for="24hours" class="nhsuk-label nhsuk-checkboxes__label">Open 24 hours</label>
            </div>
          </div>
        </fieldset>
        <button type="submit" class="nhsuk-button">Continue</button>
      </div>
    </form>
  </div>
</div>

{% endblock %}

<!-- Footer goes inside this block -->
{% block footer %}
{{ footer({
"links": [
{
"URL": "#",
"label": "NHS sites"
},
{
"URL": "#",
"label": "About us"
},
{
"URL": "#",
"label": "Contact us"
},
{
"URL": "#",
"label": "Sitemap"
},
{
"URL": "#",
"label": "Our policies"
}
]
})}}
{% endblock %}


{% block pageScripts %}
<script>
  // Hiding additional time entries by default
  document.getElementById('timeEntry2').style.display = 'none';
  document.getElementById('timeEntry3').style.display = 'none';

  // Counter to display more time entries
  let counter = 1;
  document.getElementById('anotherTime').addEventListener('click', function (e) {
    e.preventDefault();
    counter++;
    // Display the previously hidden time entries
    if (counter <= 3) {
      document.getElementById(`timeEntry${counter}`).style.display = 'block';
      document.getElementById(`openTime${counter}`).focus();
    }
    if (counter === 3) {
      document.getElementById('anotherTime').style.display = 'none';
    }
      // // Once 3 entries are shown already, clone previous
      // let newTime = document.getElementById(`timeEntry${counter - 1}`).cloneNode(true);
      // // Update IDs and for
      // newTime.setAttribute('id', `timeEntry${counter}`);
      // newTime.children[0].querySelector('input').setAttribute('id', `openTime${counter}`);
      // newTime.children[0].querySelector('label').setAttribute('for', `openTime${counter}`);
      // newTime.children[1].querySelector('input').setAttribute('id', `closeTime${counter}`);
      // newTime.children[1].querySelector('label').setAttribute('for', `closeTime${counter}`);
      // // Append to end of the parent div
      // document.getElementById('openingTimes').appendChild(newTime);
  });

  // 24 hour checkbox
  document.getElementById("24hours").addEventListener('click', () => {
    if (document.getElementById('24hours').checked) {
      const openingTimes = document.querySelector('#openingTimes').children;
      const openingTimesArray = Array.from(openingTimes);
      for (var i = 0; i < openingTimesArray.length; i++) {
        openingTimesArray[i].querySelectorAll('input').forEach( (input) => {
          input.disabled = true;
        })
      }
    } else {
      document.getElementById('openingTimes').style.display = "block";
    }
  });

</script>
{% endblock %}
